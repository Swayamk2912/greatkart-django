{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="section-content padding-y bg">

    {% include "includes/alerts.html" %}

    <div class="container">
        <div class="row">
            <aside class="col-md-3">
                <ul class="list-group">
                    <a class="list-group-item active" href="#"> My order history </a>
                    <a class="list-group-item" href="#"> Transactions </a>
                    <a class="list-group-item" href="#"> Return and refunds </a>
                    <a class="list-group-item" href="#"> Settings </a>
                </ul>
                <br>
                <a class="btn btn-light btn-block" href="{% url 'logout' %}">
                    <i class="fa fa-power-off"></i> <span class="text">Log out</span>
                </a>
            </aside>

            <main class="col-md-9">
                {% for order in orders %}
                <article class="card mb-3">
                    <header class="card-header">
                        <strong class="d-inline-block mr-3">Order ID: {{ order.order_number }}</strong>
                        <span>Order Date: {{ order.created_at|date:"d M Y" }}</span>
                    </header>
                    <div class="card-body">
                        <p><strong>Total:</strong> ${{ order.total }}</p>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            {% for item in order.orderproduct_set.all %}
                            <tr>
                                <td width="65">
                                    <img src="{{ item.product.image.url }}" class="img-xs border">
                                </td>
                                <td>
                                    <p class="title mb-0">{{ item.product.product_name }}</p>
                                    <var class="price text-muted">USD {{ item.price }}</var>
                                    <p>Quantity: {{ item.quantity }}</p>
                                </td>
                                <td> Seller <br> {{ item.product.seller }} </td>
                                <td width="250">
                                    <a href="#" class="btn btn-outline-primary">Track order</a>
                                    <a href="#" class="btn btn-light">Details</a>
                                </td>
                            </tr>
                            {% endfor %}
                        </table>
                    </div>
                </article>
                {% empty %}
                    <p>You have no orders yet.</p>
                {% endfor %}
            </main>
        </div>
    </div>
</section>
{% endblock %}
